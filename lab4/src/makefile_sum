CC=gcc
CFLAGS=-I../../lab3/src/ -std=c99
THFLAGS=-pthread -lsum -L.

all: sum

again: clean all

utils.o : utils.h
	$(CC) -o utils.o -c utils.c $(CFLAGS)

sum: libsum utils.o utils.h sum_arr.h 
	$(CC) -o sum utils.o parallel_sum.c $(CFLAGS) $(THFLAGS)

libsum: sum.o
	$(CC) -shared sum.o -o libsum.so $(CFLAGS)
	
sum.o: sum_arr.c sum_arr.h 
	$(CC) -c sum_arr.c -o sum.o -fPIC $(CFLAGS)

clean :
	rm utils.o sum sum.o libsum.so
